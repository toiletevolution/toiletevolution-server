<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/paper-styles/paper-styles.html">

<link rel="import" href="te-device-detail.html">
<link rel="import" href="te-device-item.html">
<link rel="import" href="te-device-list.html">
<link rel="import" href="te-icon.html">
<link rel="import" href="mdi.html">

<dom-module id="te-devices">

  <template>

    <style>
      :host {
        display: block;
        @apply(--layout-flex);
        @apply(--layout-vertical);
      }
      iron-pages {
        height: 100%;
        @apply(--layout-flex);
        @apply(--layout-vertical);
      }
    </style>

    <iron-pages selected="[[page]]" attr-for-selected="name">
      <te-device-list name="list" admin="{{admin}}" selected="{{pageSelected(page, 'list')}}"></te-device-list>
      <te-device-detail name="detail" device-id="{{deviceId}}" admin="{{admin}}" selected="{{pageSelected(page, 'detail')}}"></te-device-detail>
    </iron-pages>

  </template>

  <script>

    Polymer({

      is: 'te-devices',
      properties: {
        deviceId: {
          type: String,
          notify: true
        },
        admin: {
          type: Boolean,
          value: false
        },
        page: {
          type: String
        }
      },
      observers: [
        '_deviceIdChanged(deviceId)'
      ],
      pageSelected: function(page, name) {
        return page === name;
      },
      _deviceIdChanged: function(deviceId) {
        this.page = deviceId? 'detail' : 'list';
      },
      reload: function() {
        this.$$('te-device-list').reload();
      },
      ready: function() {
        this._deviceIdChanged(this.deviceId);
      }

    });

  </script>

</dom-module>
